jQuery(document).ready(function(O){const m="yy-mm-dd";const F="display";const aa="active";const H="arrival";const y="departure";function B(ah){return(("number"===typeof ah)&&(0<ah))}function ag(ai,ah,aj){return(("string"===typeof ai)&&("object"===typeof ah)&&(ah.hasOwnProperty(ai))&&(aj===typeof ah[ai]))}function e(ai,ah,aj){return ag(ai,ah,aj)?ah[ai]:undefined}function D(ai,ah){let data=ah.getAttribute("data-"+ai);return(null===data)?"":data}function M(ai,aj,ah){ah.setAttribute("data-"+ai,aj)}function ab(ai,ah){ah.removeAttribute("data-"+ai)}function ad(ah,aj){try{return O.datepicker.formatDate(aj,ah)}catch(ai){console.log(ai)}return""}function R(ah,aj){try{return O.datepicker.parseDate(aj,ah)}catch(ai){console.log(ai)}return null}function E(ah,ai,aj){return ad(R(ah,ai),aj)}function X(ai,ah){if((null===ai)||(null===ah)||("function"!==typeof ai.getTime)||("function"!==typeof ah.getTime)){return false}return ai.getTime()===ah.getTime()}function J(ah,ai,aj){let theDate=R(ah,aj);let deadLine=R(ai,aj);return((null!==theDate)&&(null!==deadLine)&&(theDate<deadLine))}function Y(ah,ai,aj){if(ah===ai){return true}let theDate=R(ah,aj);let deadLine=R(ai,aj);return((null!==theDate)&&(null!==deadLine)&&(theDate<deadLine))}function G(ai,ak,ah,aj){let date=R(ai,aj);let start=R(ak,aj);let end=R(ah,aj);return((null!==date)&&(null!==start)&&(null!==end)&&(start<=date)&&(date<=end))}function I(ah,ai){let newDate=new Date(ah.getTime());newDate.setDate(ah.getDate()+ai);return newDate}function n(ah,ai){let match=null;let regex=/date-key-(\d{4}-\d{2}-\d{2})/;if(("string"===typeof ah)&&(null!==(match=ah.match(regex)))&&("string"===typeof match[1])){return E(match[1],m,ai)}return undefined}function t(ah){let instance=D("instance",ah);return(""===instance)?"0":instance}function s(ah){let i=t(ah);return(undefined===availabilityCalendar.calendars[i])?{}:availabilityCalendar.calendars[i].parameters}function z(ah,ai){let parameters=s(ai);return(undefined===parameters[ah])?null:parameters[ah]}function d(ai,ah){let id=z(ai+"Id",ah);return((null===id)||(""===id))?null:document.getElementById(id)}function K(ah,ai){let fields=[];let types=["","Display"];for(let type in types){let input=d(ah+types[type],ai);let inputType=null;if((null!==input)&&(null!==(inputType=input.getAttribute("type")))&&("hidden"!==inputType)){fields.push(input)}}return fields}function u(ah){let key="Display";let fields=[H+key,y+key];for(let i=0;i<fields.length;i++){let input=d(fields[i],ah);if((null!==input)&&("readonly"===input.getAttribute("readonly"))){let title=input.getAttribute("title");if((null!==title)&&(""!==title)){O(input).on("click",function(){alert(this.getAttribute("title"))})}}}}function af(ah){let format=z("dateFormat",ah);return(("string"===typeof format)&&(""!==format))?format:availabilityCalendar.defaults.dateFormat}function Z(ah){let format=z("dateFormatDisplay",ah);return(("string"===typeof format)&&(""!==format))?format:availabilityCalendar.defaults.dateFormatDisplay}function C(ah){let currentType=D("type",ah);if(""===currentType){currentType=((null===d(H,ah))||(null===d(y,ah)))?F:aa;M("type",currentType,ah)}return currentType}function l(ah){let i=t(ah);return(undefined===availabilityCalendar.calendars[i])?{}:availabilityCalendar.calendars[i].availability}function p(ah){let state=D("state",ah);if(""===state){state=H;W(ah,state)}return state}function W(ai,ah){ah=("undefined"===typeof ah)?H:ah;M("state",ah,ai);b(ah,ai)}function c(ah){let state=p(ah);let newState=(H===state)?y:H;W(ah,newState);a(ah)}function r(ah){let parameters=s(ah);let calendarDefault=e("minStay",parameters,"number");return B(calendarDefault)?calendarDefault:availabilityCalendar.defaults.minStay}function k(ah,ai){return ag(ah,ai,"object")}function ae(ah,ai){let data=e(ah,ai,"object");return(undefined===data)?{}:data}function j(ah){let rate=e("rate",ah,"string");return(undefined===rate)?"":rate}function T(ah){let available=e("available",ah,"boolean");return(undefined===available)?false:available}function o(ah){let arrivalAllowed=e("arrival",ah,"boolean");return(undefined===arrivalAllowed)?false:arrivalAllowed}function w(ah){let departureAllowed=e("departure",ah,"boolean");return(undefined===departureAllowed)?false:departureAllowed}function P(ah,ai){if(k(ah,ai)){return T(ae(ah,ai))}return false}function L(ah,ai){if(k(ah,ai)){return w(ae(ah,ai))}return false}function A(ah,ai){let dates=l(ai);if(k(ah,dates)){let dateMinStay=e("minStay",ae(ah,dates),"number");if(B(dateMinStay)){return dateMinStay}}return r(ai)}function N(ah,ai){let dates=l(ai);let defaultMaxStay=z("maxStay",ai);return(dates.hasOwnProperty(ah)&&("number"===typeof dates[ah].maxStay)&&(0<dates[ah].maxStay))?dates[ah].maxStay:((("number"===typeof defaultMaxStay)&&(0<defaultMaxStay))?defaultMaxStay:availabilityCalendar.defaults.maxStay)}function v(ai,ah){let format=af(ah);return ad(I(R(ai,format),A(ai,ah)),format)}function Q(ai,ah){let dates=l(ah);if(!P(ai,dates)){return ai}let format=af(ah);let arrivalDate=R(ai,format);let addDays=1;let newDate="";let maxStay=N(ai,ah);while(P(newDate=ad(I(arrivalDate,addDays),format),dates)){if(addDays>=maxStay){return newDate}addDays++}return newDate}function V(ai,ah){let dates=l(ah);if(L(ai,dates)){return ai}let lastDate=z("lastDate",ah);let format=af(ah);let addDays=1;let newDate=ad(I(R(ai,format),addDays),format);while(!L(newDate,dates)&&Y(newDate,lastDate,format)){addDays++;newDate=ad(I(R(ai,format),addDays),format)}return newDate}function b(ah,ai){let oldState=(H===ah)?y:H;K(ah,ai).forEach(function(aj){try{O(aj.parentNode).removeClass("calendar-deem").addClass("calendar-highlight")}catch(ak){console.log(ak)}});K(oldState,ai).forEach(function(aj){try{O(aj.parentNode).removeClass("calendar-highlight").addClass("calendar-deem")}catch(ak){console.log(ak)}})}function h(aj,ai,al,ak,ah){M("selected-"+ai,aj,al);let inputField=d(ai,al);inputField.value=aj;let displayInputField=d(ai+"Display",al);if(null!==displayInputField){displayInputField.value=(""===aj)?aj:E(aj,ak,ah)}}function g(ah){let fields=[H,y];for(let index in fields){let field=fields[index];let inputField=d(field,ah);if((null!==inputField)&&("string"===typeof inputField.value)&&(""!==inputField.value)){M("selected-"+field,inputField.value,ah);let displayInputField=d(field+"Display",ah);if(null!==displayInputField){displayInputField.value=E(inputField.value,af(ah),Z(ah))}}}}function ac(ah){if(true===z("showRates",ah)){let format=af(ah);let dates=l(ah);O(ah).find('.ui-datepicker-calendar td.has-rate[class*="date-key-"] > *[class*="ui-state"]').each(function(){let date=n(this.parentNode.className,format);let rate="";if((undefined!==date)&&k(date,dates)&&(""!==(rate=j(ae(date,dates))))&&(0===O(this.parentNode).find(".rate").length)){let rateElement=document.createElement("span");rateElement.className="rate";rateElement.appendChild(document.createTextNode(rate));this.parentNode.appendChild(rateElement)}})}O(ah).find(".ui-datepicker-calendar td[title]").contextmenu(function(ai){ai.preventDefault();try{alert(this.getAttribute("title").replace(/\.\s?/gi,".\n"))}catch(aj){console.log(aj)}})}function a(ah){window.setTimeout(function(ai){ac(ai)},250,ah)}function f(ai,ah,aj){return aj.indexOf(ai)===ah}function S(ah){let classes=[];let messages=[];let state=p(this);let format=z("dateFormat",this);let dates=l(this);let theDateString=ad(ah,format);let theDateKey=ad(ah,m);classes.push("date-key-"+theDateKey);let firstDate=R(z("firstDate",this),format);let beforeMinDate=(ah<firstDate);if(beforeMinDate){classes.push("before-min-date")}let afterMaxDate=(ah>R(z("lastDate",this),format));if(afterMaxDate){classes.push("after-max-date")}let hasData=k(theDateString,dates);classes.push(hasData?"has-data":"no-data");let dateData=ae(theDateString,dates);let rate=j(dateData);let hasRate=(""!==rate);if(!beforeMinDate&&!afterMaxDate){classes.push(hasRate?"has-rate":"no-rate")}let arrivalAvailable=(T(dateData)&&!(beforeMinDate||afterMaxDate));classes.push(arrivalAvailable?"arrival-available":"arrival-unavailable");let yesterdayDate=I(ah,-1);let yesterdayDateString=ad(yesterdayDate,format);let yesterdayData=ae(yesterdayDateString,dates);let departureAvailable=(T(yesterdayData)&&!(beforeMinDate||afterMaxDate)&&!(yesterdayDate<firstDate));classes.push(departureAvailable?"departure-available":"departure-unavailable");let arrivalAllowed=o(dateData);classes.push(arrivalAllowed?"arrival-allowed":"arrival-prohibited");let departureAllowed=w(dateData);classes.push(departureAllowed?"departure-allowed":"departure-prohibited");if(!beforeMinDate&&!afterMaxDate){if(hasRate){messages.push(availabilityCalendar.messages.rate.replace("{rate}",rate))}messages.push(availabilityCalendar.messages.minimumStay.replace("{minimumStay}",A(theDateString,this)));messages.push(arrivalAvailable?availabilityCalendar.messages.available:availabilityCalendar.messages.unavailable);messages.push(arrivalAllowed?availabilityCalendar.messages.arrivalsAllowed:availabilityCalendar.messages.arrivalsNotAllowed);messages.push(departureAllowed?availabilityCalendar.messages.departuresAllowed:availabilityCalendar.messages.departuresNotAllowed)}let canArrive=(arrivalAvailable&&arrivalAllowed);let canDepart=(departureAvailable&&departureAllowed);let selectedArrivalDateString=D("selected-arrival",this);let selectedArrivalDate=R(selectedArrivalDateString,format);let isSelectedArrival=((null!==selectedArrivalDate)&&X(ah,selectedArrivalDate));if(isSelectedArrival){classes.push("selected-arrival");messages.push(availabilityCalendar.messages.selectedArrival);if(!canArrive||beforeMinDate||afterMaxDate){classes.push("arrival-conflict");messages.push(availabilityCalendar.messages.selectedArrivalConflict)}}let selectedDepartureDateString=D("selected-departure",this);let selectedDepartureDate=R(selectedDepartureDateString,format);let isSelectedDeparture=((null!==selectedDepartureDate)&&X(ah,selectedDepartureDate));if(isSelectedDeparture){classes.push("selected-departure");messages.push(availabilityCalendar.messages.selectedDeparture);if(!canDepart||beforeMinDate||afterMaxDate){classes.push("departure-conflict");messages.push(availabilityCalendar.messages.selectedDepartureConflict)}}if((null!==selectedArrivalDate)&&(null!==selectedDepartureDate)){if((selectedArrivalDate<ah)&&(ah<selectedDepartureDate)){classes.push("selected-stay");messages.push(availabilityCalendar.messages.selectedStay);if((!arrivalAvailable&&!departureAvailable)||beforeMinDate||afterMaxDate){classes.push("stay-conflict");messages.push(availabilityCalendar.messages.selectedStayConflict)}else{if(!arrivalAvailable){classes.push("arrival-conflict");messages.push(availabilityCalendar.messages.selectedArrivalConflict)}else{if(!departureAvailable){classes.push("departure-conflict");messages.push(availabilityCalendar.messages.selectedDepartureConflict)}}}}let minimumStayUntilDate=R(v(selectedArrivalDateString,this),format);if((selectedDepartureDate<minimumStayUntilDate)){if(isSelectedArrival){classes.push("arrival-conflict");messages.push(availabilityCalendar.messages.minimumStayConflict)}else{if(isSelectedDeparture){classes.push("departure-conflict");messages.push(availabilityCalendar.messages.minimumStayConflict)}else{if((selectedArrivalDate<ah)&&(ah<selectedDepartureDate)){classes.push("stay-conflict");messages.push(availabilityCalendar.messages.minimumStayConflict)}}}}}let minDepartureDateString=D("first-departure",this);let minStayMessage=false;if((y===state)&&(""!==minDepartureDateString)){if((""!==selectedArrivalDateString)&&(theDateString===selectedArrivalDateString)){classes.push("minimum-stay-requirement");minStayMessage=true}else{if((""!==selectedArrivalDateString)&&(J(selectedArrivalDateString,theDateString,format))&&(J(theDateString,minDepartureDateString,format))){classes.push("minimum-stay-requirement selected-stay");minStayMessage=true}else{if(theDateString===minDepartureDateString){classes.push("minimum-stay-requirement selected-departure");messages.push(availabilityCalendar.messages.firstAvailableDeparture)}}}if(true===minStayMessage){messages.push(availabilityCalendar.messages.minimumStayPeriod)}}let selectable=false;if(H===state){selectable=canArrive}else{selectable=(canDepart&&G(theDateString,D("first-departure",this),D("last-departure",this),format))}let uniqueClasses=classes.filter(f);let uniqueMessages=messages.filter(f);return[selectable,uniqueClasses.join(" "),uniqueMessages.join(" ")]}function q(ai,ah,aj){let state=p(aj);if(H===state){let messages=[];let mustDepartOnDateString=Q(ai,aj);let minimumStayUntilDateString=v(ai,aj);let firstAllowedDepartureDateString=V(minimumStayUntilDateString,aj);if(J(mustDepartOnDateString,firstAllowedDepartureDateString,ah.settings.dateFormat)){messages.push(availabilityCalendar.messages.arrivalImpossible);messages.push(availabilityCalendar.messages.selectAnotherDate);alert(messages.join("\n"));a(aj);return}h("",y,aj,ah.settings.dateFormat,ah.settings.altFormat);M("first-departure",firstAllowedDepartureDateString,aj);M("last-departure",mustDepartOnDateString,aj)}else{if(y===state){ab("first-departure",aj);ab("last-departure",aj)}}h(ai,state,aj,ah.settings.dateFormat,ah.settings.altFormat);c(aj)}function U(ah){return Math.floor(ah.offsetWidth/295)}function x(ah,ai){g(ai);W(ai,H);let arrivalInput=d(H,ai);let defaultDate=((null===arrivalInput)||(""===arrivalInput.value))?null:arrivalInput.value;let calendarParameters=s(ai);let parameters={beforeShowDay:S,altFormat:calendarParameters.dateFormatDisplay,dateFormat:calendarParameters.dateFormat,firstDay:calendarParameters.weekStart,defaultDate:defaultDate,gotoCurrent:true,maxDate:calendarParameters.lastDate,minDate:calendarParameters.firstDate,showOtherMonths:false,numberOfMonths:U(ai),onChangeMonthYear:function(){a(this)},onSelect:function(){a(this)}};let calendarType=C(ai);switch(calendarType){case F:O(ai).datepicker(parameters);break;case aa:default:parameters.onSelect=function(ak,aj){q(ak,aj,this)};O(ai).datepicker(parameters);u(ai);break}a(ai)}O(".availability-calendar").each(x)});