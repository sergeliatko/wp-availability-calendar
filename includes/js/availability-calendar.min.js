jQuery(document).ready(function(M){const l="yy-mm-dd";const D="display";const X="active";const F="arrival";const w="departure";function z(ae){return(("number"===typeof ae)&&(0<ae))}function ad(af,ae,ag){return(("string"===typeof af)&&("object"===typeof ae)&&(ae.hasOwnProperty(af))&&(ag===typeof ae[af]))}function e(af,ae,ag){return ad(af,ae,ag)?ae[af]:undefined}function B(af,ae){let data=ae.getAttribute("data-"+af);return(null===data)?"":data}function K(af,ag,ae){ae.setAttribute("data-"+af,ag)}function Y(af,ae){ae.removeAttribute("data-"+af)}function aa(ae,ag){try{return M.datepicker.formatDate(ag,ae)}catch(af){console.log(af)}return""}function P(ae,ag){try{return M.datepicker.parseDate(ag,ae)}catch(af){console.log(af)}return null}function C(ae,af,ag){return aa(P(ae,af),ag)}function U(af,ae){if((null===af)||(null===ae)||("function"!==typeof af.getTime)||("function"!==typeof ae.getTime)){return false}return af.getTime()===ae.getTime()}function H(ae,af,ag){let theDate=P(ae,ag);let deadLine=P(af,ag);return((null!==theDate)&&(null!==deadLine)&&(theDate<deadLine))}function V(ae,af,ag){if(ae===af){return true}let theDate=P(ae,ag);let deadLine=P(af,ag);return((null!==theDate)&&(null!==deadLine)&&(theDate<deadLine))}function E(af,ah,ae,ag){let date=P(af,ag);let start=P(ah,ag);let end=P(ae,ag);return((null!==date)&&(null!==start)&&(null!==end)&&(start<=date)&&(date<=end))}function G(ae,af){let newDate=new Date(ae.getTime());newDate.setDate(ae.getDate()+af);return newDate}function m(ae,af){let match=null;let regex=/date-key-(\d{4}-\d{2}-\d{2})/;if(("string"===typeof ae)&&(null!==(match=ae.match(regex)))&&("string"===typeof match[1])){return C(match[1],l,af)}return undefined}function s(ae){let instance=B("instance",ae);return(""===instance)?"0":instance}function r(ae){let i=s(ae);return(undefined===availabilityCalendar.calendars[i])?{}:availabilityCalendar.calendars[i].parameters}function x(ae,af){let parameters=r(af);return(undefined===parameters[ae])?null:parameters[ae]}function d(af,ae){let id=x(af+"Id",ae);return((null===id)||(""===id))?null:document.getElementById(id)}function I(ae,af){let fields=[];let types=["","Display"];for(let type in types){let input=d(ae+types[type],af);let inputType=null;if((null!==input)&&(null!==(inputType=input.getAttribute("type")))&&("hidden"!==inputType)){fields.push(input)}}return fields}function ac(ae){let format=x("dateFormat",ae);return(("string"===typeof format)&&(""!==format))?format:availabilityCalendar.defaults.dateFormat}function W(ae){let format=x("dateFormatDisplay",ae);return(("string"===typeof format)&&(""!==format))?format:availabilityCalendar.defaults.dateFormatDisplay}function A(ae){let currentType=B("type",ae);if(""===currentType){currentType=((null===d(F,ae))||(null===d(w,ae)))?D:X;K("type",currentType,ae)}return currentType}function k(ae){let i=s(ae);return(undefined===availabilityCalendar.calendars[i])?{}:availabilityCalendar.calendars[i].availability}function o(ae){let state=B("state",ae);if(""===state){state=F;T(ae,state)}return state}function T(af,ae){ae=("undefined"===typeof ae)?F:ae;K("state",ae,af);b(ae,af)}function c(ae){let state=o(ae);let newState=(F===state)?w:F;T(ae,newState);a(ae)}function q(ae){let parameters=r(ae);let calendarDefault=e("minStay",parameters,"number");return z(calendarDefault)?calendarDefault:availabilityCalendar.defaults.minStay}function j(ae,af){return ad(ae,af,"object")}function ab(ae,af){let data=e(ae,af,"object");return(undefined===data)?{}:data}function h(ae){let rate=e("rate",ae,"string");return(undefined===rate)?"":rate}function R(ae){let available=e("available",ae,"boolean");return(undefined===available)?false:available}function n(ae){let arrivalAllowed=e("arrival",ae,"boolean");return(undefined===arrivalAllowed)?false:arrivalAllowed}function u(ae){let departureAllowed=e("departure",ae,"boolean");return(undefined===departureAllowed)?false:departureAllowed}function N(ae,af){if(j(ae,af)){return R(ab(ae,af))}return false}function J(ae,af){if(j(ae,af)){return u(ab(ae,af))}return false}function y(ae,af){let dates=k(af);if(j(ae,dates)){let dateMinStay=e("minStay",ab(ae,dates),"number");if(z(dateMinStay)){return dateMinStay}}return q(af)}function L(ae,af){let dates=k(af);let defaultMaxStay=x("maxStay",af);return(dates.hasOwnProperty(ae)&&("number"===typeof dates[ae].maxStay)&&(0<dates[ae].maxStay))?dates[ae].maxStay:((("number"===typeof defaultMaxStay)&&(0<defaultMaxStay))?defaultMaxStay:availabilityCalendar.defaults.maxStay)}function t(af,ae){let format=ac(ae);return aa(G(P(af,format),y(af,ae)),format)}function O(af,ae){let dates=k(ae);if(!N(af,dates)){return af}let format=ac(ae);let arrivalDate=P(af,format);let addDays=1;let newDate="";let maxStay=L(af,ae);while(N(newDate=aa(G(arrivalDate,addDays),format),dates)){if(addDays>=maxStay){return newDate}addDays++}return newDate}function S(af,ae){let dates=k(ae);if(J(af,dates)){return af}let lastDate=x("lastDate",ae);let format=ac(ae);let addDays=1;let newDate=aa(G(P(af,format),addDays),format);while(!J(newDate,dates)&&V(newDate,lastDate,format)){addDays++;newDate=aa(G(P(af,format),addDays),format)}return newDate}function b(ae,af){let oldState=(F===ae)?w:F;I(ae,af).forEach(function(ag){try{M(ag.parentNode).removeClass("calendar-deem").addClass("calendar-highlight")}catch(ah){console.log(ah)}});I(oldState,af).forEach(function(ag){try{M(ag.parentNode).removeClass("calendar-highlight").addClass("calendar-deem")}catch(ah){console.log(ah)}})}function g(ag,af,ai,ah,ae){K("selected-"+af,ag,ai);let inputField=d(af,ai);inputField.value=ag;let displayInputField=d(af+"Display",ai);if(null!==displayInputField){displayInputField.value=(""===ag)?ag:C(ag,ah,ae)}}function f(ae){let fields=[F,w];for(let index in fields){let field=fields[index];let inputField=d(field,ae);if((null!==inputField)&&("string"===typeof inputField.value)&&(""!==inputField.value)){K("selected-"+field,inputField.value,ae);let displayInputField=d(field+"Display",ae);if(null!==displayInputField){displayInputField.value=C(inputField.value,ac(ae),W(ae))}}}}function Z(ae){if(true===x("showRates",ae)){let format=ac(ae);let dates=k(ae);M(ae).find('.ui-datepicker-calendar td.has-rate[class*="date-key-"] > *[class*="ui-state"]').each(function(){let date=m(this.parentNode.className,format);let rate="";if((undefined!==date)&&j(date,dates)&&(""!==(rate=h(ab(date,dates))))&&(0===M(this.parentNode).find(".rate").length)){let rateElement=document.createElement("span");rateElement.className="rate";rateElement.appendChild(document.createTextNode(rate));this.parentNode.appendChild(rateElement)}})}M(ae).find(".ui-datepicker-calendar td[title]").contextmenu(function(af){af.preventDefault();try{alert(this.getAttribute("title").replace(/\.\s?/gi,".\n"))}catch(ag){console.log(ag)}})}function a(ae){window.setTimeout(function(af){Z(af)},250,ae)}function Q(ae){let classes=[];let messages=[];let state=o(this);let format=x("dateFormat",this);let dates=k(this);let theDateString=aa(ae,format);let theDateKey=aa(ae,l);classes.push("date-key-"+theDateKey);let beforeMinDate=(ae<P(x("firstDate",this),format));if(beforeMinDate){classes.push("before-min-date")}let afterMaxDate=(ae>P(x("lastDate",this),format));if(afterMaxDate){classes.push("after-max-date")}let hasData=j(theDateString,dates);classes.push(hasData?"has-data":"no-data");let dateData=ab(theDateString,dates);let rate=h(dateData);let hasRate=(""!==rate);if(!beforeMinDate&&!afterMaxDate){classes.push(hasRate?"has-rate":"no-rate")}let arrivalAvailable=(R(dateData)&&!(beforeMinDate||afterMaxDate));classes.push(arrivalAvailable?"arrival-available":"arrival-unavailable");let yesterdayData=ab(aa(G(ae,-1),format),dates);let departureAvailable=(R(yesterdayData)&&!(beforeMinDate||afterMaxDate));classes.push(departureAvailable?"departure-available":"departure-unavailable");let arrivalAllowed=n(dateData);classes.push(arrivalAllowed?"arrival-allowed":"arrival-prohibited");let departureAllowed=u(dateData);classes.push(departureAllowed?"departure-allowed":"departure-prohibited");if(!beforeMinDate&&!afterMaxDate){if(hasRate){messages.push(availabilityCalendar.messages.rate.replace("{rate}",rate))}messages.push(availabilityCalendar.messages.minimumStay.replace("{minimumStay}",y(theDateString,this)));messages.push(arrivalAvailable?availabilityCalendar.messages.available:availabilityCalendar.messages.unavailable);messages.push(arrivalAllowed?availabilityCalendar.messages.arrivalsAllowed:availabilityCalendar.messages.arrivalsNotAllowed);messages.push(departureAllowed?availabilityCalendar.messages.departuresAllowed:availabilityCalendar.messages.departuresNotAllowed)}let canArrive=(arrivalAvailable&&arrivalAllowed);let canDepart=(departureAvailable&&departureAllowed);let conflictMessage=false;let selectedArrivalDateString=B("selected-arrival",this);let selectedArrivalDate=P(selectedArrivalDateString,format);let selectedArrival=((null!==selectedArrivalDate)&&U(ae,selectedArrivalDate));if(selectedArrival){classes.push("selected-arrival");messages.push(availabilityCalendar.messages.selectedArrival);if(!canArrive||beforeMinDate||afterMaxDate){classes.push("arrival-conflict");conflictMessage=true}}let selectedDepartureDateString=B("selected-departure",this);let selectedDepartureDate=P(selectedDepartureDateString,format);let selectedDeparture=((null!==selectedDepartureDate)&&U(ae,selectedDepartureDate));if(selectedDeparture){classes.push("selected-departure");messages.push(availabilityCalendar.messages.selectedDeparture);if(!canDepart||beforeMinDate||afterMaxDate){classes.push("departure-conflict");conflictMessage=true}}if((null!==selectedArrivalDate)&&(null!==selectedDepartureDate)&&((selectedArrivalDate<ae)&&(ae<selectedDepartureDate))){classes.push("selected-stay");messages.push(availabilityCalendar.messages.selectedStay);if((!arrivalAvailable&&!departureAvailable)||beforeMinDate||afterMaxDate){classes.push("stay-conflict");conflictMessage=true}else{if(!arrivalAvailable){classes.push("arrival-conflict");conflictMessage=true}else{if(!departureAvailable){classes.push("departure-conflict");conflictMessage=true}}}}if(true===conflictMessage){messages.push(availabilityCalendar.messages.selectedDatesConflict)}let minDepartureDateString=B("first-departure",this);let minStayMessage=false;if((w===state)&&(""!==minDepartureDateString)){if((""!==selectedArrivalDateString)&&(theDateString===selectedArrivalDateString)){classes.push("minimum-stay-requirement");minStayMessage=true}else{if((""!==selectedArrivalDateString)&&(H(selectedArrivalDateString,theDateString,format))&&(H(theDateString,minDepartureDateString,format))){classes.push("minimum-stay-requirement selected-stay");minStayMessage=true}else{if(theDateString===minDepartureDateString){classes.push("minimum-stay-requirement selected-departure");messages.push(availabilityCalendar.messages.firstAvailableDeparture)}}}if(true===minStayMessage){messages.push(availabilityCalendar.messages.minimumStayPeriod)}}let selectable=false;if(F===state){selectable=canArrive}else{selectable=(canDepart&&E(theDateString,B("first-departure",this),B("last-departure",this),format))}return[selectable,classes.join(" "),messages.join(" ")]}function p(af,ae,ag){let state=o(ag);if(F===state){let messages=[];let mustDepartOnDateString=O(af,ag);let minimumStayUntilDateString=t(af,ag);let firstAllowedDepartureDateString=S(minimumStayUntilDateString,ag);if(H(mustDepartOnDateString,firstAllowedDepartureDateString,ae.settings.dateFormat)){messages.push(availabilityCalendar.messages.arrivalImpossible);messages.push(availabilityCalendar.messages.selectAnotherDate);alert(messages.join("\n"));a(ag);return}g("",w,ag,ae.settings.dateFormat,ae.settings.altFormat);K("first-departure",firstAllowedDepartureDateString,ag);K("last-departure",mustDepartOnDateString,ag)}else{if(w===state){Y("first-departure",ag);Y("last-departure",ag)}}g(af,state,ag,ae.settings.dateFormat,ae.settings.altFormat);c(ag)}function v(ae,af){f(af);T(af,F);let arrivalInput=d(F,af);let defaultDate=((null===arrivalInput)||(""===arrivalInput.value))?null:arrivalInput.value;let calendarParameters=r(af);let parameters={beforeShowDay:Q,altFormat:calendarParameters.dateFormatDisplay,dateFormat:calendarParameters.dateFormat,firstDay:calendarParameters.weekStart,defaultDate:defaultDate,gotoCurrent:true,maxDate:calendarParameters.lastDate,minDate:calendarParameters.firstDate,showOtherMonths:false,numberOfMonths:3,onChangeMonthYear:function(){a(this)},onSelect:function(){a(this)}};let calendarType=A(af);switch(calendarType){case D:M(af).datepicker(parameters);break;case X:default:parameters.onSelect=function(ah,ag){p(ah,ag,this)};M(af).datepicker(parameters);break}a(af)}M(".availability-calendar").each(v)});