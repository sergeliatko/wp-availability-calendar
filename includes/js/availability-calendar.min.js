jQuery(document).ready(function(h){function l(n,o){let calendarParameters=m(o);let calendarType=c(o);switch(calendarType){case"display":h(o).datepicker({beforeShowDay:g,altFormat:calendarParameters.dateFormatDisplay,dateFormat:calendarParameters.dateFormat,defaultDate:null,firstDay:calendarParameters.weekStart,gotoCurrent:true,maxDate:calendarParameters.lastDate,minDate:calendarParameters.firstDate,showOtherMonths:false});break;case"active":default:h(o).datepicker({altFormat:calendarParameters.dateFormatDisplay,dateFormat:calendarParameters.dateFormat,defaultDate:null,firstDay:calendarParameters.weekStart,gotoCurrent:true,maxDate:calendarParameters.lastDate,minDate:calendarParameters.firstDate,showOtherMonths:false});break}}function g(n){let dates=k(this);let format=f("dateFormat",this);if(n<j(f("firstDate",this),format)){return[false,"disabled",""]}if(n>j(f("lastDate",this),format)){return[false,"disabled",""]}let date=d(n,format);if(!dates.hasOwnProperty(date)){return[false,"disabled",""]}let available=(true===dates[date].available);let arrival=(true===dates[date].arrival);let departure=(true===dates[date].departure);let yesterday=d(e(n,-1),format);let arrivalOnly=dates.hasOwnProperty(yesterday)?!(true===dates[yesterday].available):true;let departureOnly=!available&&!arrivalOnly;let classes=[];let messages=[];let selectable=(available&&arrival);if(selectable){classes.push("available");messages.push("Available.");if(arrivalOnly){classes.push("arrival-only");messages.push("Available only for arrivals.")}}else{classes.push("unavailable");messages.push("Unavailable.");if(departureOnly){classes.push("departure-only");messages.push("Departures only.")}}return[selectable,classes.join(" "),messages.join(" ")]}function e(n,o){let newDate=new Date(n.getTime());newDate.setDate(n.getDate()+o);return newDate}function d(n,o){return h.datepicker.formatDate(o,n)}function j(n,o){return h.datepicker.parseDate(o,n)}function c(n){return((null===b("arrival",n))||(null===b("departure",n)))?"display":"active"}function b(o,n){switch(o){case"arrival":return document.getElementById(f("arrivalId",n));case"arrivalDisplay":return document.getElementById(f("arrivalIdDisplay",n));case"departure":return document.getElementById(f("departureId",n));case"departureDisplay":return document.getElementById(f("departureIdDisplay",n));default:return null}}function a(n){return n.getAttribute("data-instance")}function m(n){let i=a(n);return(undefined===availabilityCalendar.calendars[i])?{}:availabilityCalendar.calendars[i].parameters}function f(n,o){let parameters=m(o);return(undefined===parameters[n])?null:parameters[n]}function k(n){let i=a(n);return(undefined===availabilityCalendar.calendars[i])?{}:availabilityCalendar.calendars[i].availability}h(".availability-calendar").each(l)});