jQuery(document).ready(function(M){const l="yy-mm-dd";const D="display";const Y="active";const F="arrival";const w="departure";function z(af){return(("number"===typeof af)&&(0<af))}function ae(ag,af,ah){return(("string"===typeof ag)&&("object"===typeof af)&&(af.hasOwnProperty(ag))&&(ah===typeof af[ag]))}function e(ag,af,ah){return ae(ag,af,ah)?af[ag]:undefined}function B(ag,af){let data=af.getAttribute("data-"+ag);return(null===data)?"":data}function K(ag,ah,af){af.setAttribute("data-"+ag,ah)}function Z(ag,af){af.removeAttribute("data-"+ag)}function ab(af,ah){try{return M.datepicker.formatDate(ah,af)}catch(ag){console.log(ag)}return""}function P(af,ah){try{return M.datepicker.parseDate(ah,af)}catch(ag){console.log(ag)}return null}function C(af,ag,ah){return ab(P(af,ag),ah)}function V(ag,af){if((null===ag)||(null===af)||("function"!==typeof ag.getTime)||("function"!==typeof af.getTime)){return false}return ag.getTime()===af.getTime()}function H(af,ag,ah){let theDate=P(af,ah);let deadLine=P(ag,ah);return((null!==theDate)&&(null!==deadLine)&&(theDate<deadLine))}function W(af,ag,ah){if(af===ag){return true}let theDate=P(af,ah);let deadLine=P(ag,ah);return((null!==theDate)&&(null!==deadLine)&&(theDate<deadLine))}function E(ag,ai,af,ah){let date=P(ag,ah);let start=P(ai,ah);let end=P(af,ah);return((null!==date)&&(null!==start)&&(null!==end)&&(start<=date)&&(date<=end))}function G(af,ag){let newDate=new Date(af.getTime());newDate.setDate(af.getDate()+ag);return newDate}function m(af,ag){let match=null;let regex=/date-key-(\d{4}-\d{2}-\d{2})/;if(("string"===typeof af)&&(null!==(match=af.match(regex)))&&("string"===typeof match[1])){return C(match[1],l,ag)}return undefined}function s(af){let instance=B("instance",af);return(""===instance)?"0":instance}function r(af){let i=s(af);return(undefined===availabilityCalendar.calendars[i])?{}:availabilityCalendar.calendars[i].parameters}function x(af,ag){let parameters=r(ag);return(undefined===parameters[af])?null:parameters[af]}function d(ag,af){let id=x(ag+"Id",af);return((null===id)||(""===id))?null:document.getElementById(id)}function I(af,ag){let fields=[];let types=["","Display"];for(let type in types){let input=d(af+types[type],ag);let inputType=null;if((null!==input)&&(null!==(inputType=input.getAttribute("type")))&&("hidden"!==inputType)){fields.push(input)}}return fields}function ad(af){let format=x("dateFormat",af);return(("string"===typeof format)&&(""!==format))?format:availabilityCalendar.defaults.dateFormat}function X(af){let format=x("dateFormatDisplay",af);return(("string"===typeof format)&&(""!==format))?format:availabilityCalendar.defaults.dateFormatDisplay}function A(af){let currentType=B("type",af);if(""===currentType){currentType=((null===d(F,af))||(null===d(w,af)))?D:Y;K("type",currentType,af)}return currentType}function k(af){let i=s(af);return(undefined===availabilityCalendar.calendars[i])?{}:availabilityCalendar.calendars[i].availability}function o(af){let state=B("state",af);if(""===state){state=F;U(af,state)}return state}function U(ag,af){af=("undefined"===typeof af)?F:af;K("state",af,ag);b(af,ag)}function c(af){let state=o(af);let newState=(F===state)?w:F;U(af,newState);a(af)}function q(af){let parameters=r(af);let calendarDefault=e("minStay",parameters,"number");return z(calendarDefault)?calendarDefault:availabilityCalendar.defaults.minStay}function j(af,ag){return ae(af,ag,"object")}function ac(af,ag){let data=e(af,ag,"object");return(undefined===data)?{}:data}function h(af){let rate=e("rate",af,"string");return(undefined===rate)?"":rate}function R(af){let available=e("available",af,"boolean");return(undefined===available)?false:available}function n(af){let arrivalAllowed=e("arrival",af,"boolean");return(undefined===arrivalAllowed)?false:arrivalAllowed}function u(af){let departureAllowed=e("departure",af,"boolean");return(undefined===departureAllowed)?false:departureAllowed}function N(af,ag){if(j(af,ag)){return R(ac(af,ag))}return false}function J(af,ag){if(j(af,ag)){return u(ac(af,ag))}return false}function y(af,ag){let dates=k(ag);if(j(af,dates)){let dateMinStay=e("minStay",ac(af,dates),"number");if(z(dateMinStay)){return dateMinStay}}return q(ag)}function L(af,ag){let dates=k(ag);let defaultMaxStay=x("maxStay",ag);return(dates.hasOwnProperty(af)&&("number"===typeof dates[af].maxStay)&&(0<dates[af].maxStay))?dates[af].maxStay:((("number"===typeof defaultMaxStay)&&(0<defaultMaxStay))?defaultMaxStay:availabilityCalendar.defaults.maxStay)}function t(ag,af){let format=ad(af);return ab(G(P(ag,format),y(ag,af)),format)}function O(ag,af){let dates=k(af);if(!N(ag,dates)){return ag}let format=ad(af);let arrivalDate=P(ag,format);let addDays=1;let newDate="";let maxStay=L(ag,af);while(N(newDate=ab(G(arrivalDate,addDays),format),dates)){if(addDays>=maxStay){return newDate}addDays++}return newDate}function T(ag,af){let dates=k(af);if(J(ag,dates)){return ag}let lastDate=x("lastDate",af);let format=ad(af);let addDays=1;let newDate=ab(G(P(ag,format),addDays),format);while(!J(newDate,dates)&&W(newDate,lastDate,format)){addDays++;newDate=ab(G(P(ag,format),addDays),format)}return newDate}function b(af,ag){let oldState=(F===af)?w:F;I(af,ag).forEach(function(ah){try{M(ah.parentNode).removeClass("calendar-deem").addClass("calendar-highlight")}catch(ai){console.log(ai)}});I(oldState,ag).forEach(function(ah){try{M(ah.parentNode).removeClass("calendar-highlight").addClass("calendar-deem")}catch(ai){console.log(ai)}})}function g(ah,ag,aj,ai,af){K("selected-"+ag,ah,aj);let inputField=d(ag,aj);inputField.value=ah;let displayInputField=d(ag+"Display",aj);if(null!==displayInputField){displayInputField.value=(""===ah)?ah:C(ah,ai,af)}}function f(af){let fields=[F,w];for(let index in fields){let field=fields[index];let inputField=d(field,af);if((null!==inputField)&&("string"===typeof inputField.value)&&(""!==inputField.value)){K("selected-"+field,inputField.value,af);let displayInputField=d(field+"Display",af);if(null!==displayInputField){displayInputField.value=C(inputField.value,ad(af),X(af))}}}}function aa(af){if(true===x("showRates",af)){let format=ad(af);let dates=k(af);M(af).find('.ui-datepicker-calendar td.has-rate[class*="date-key-"] > *[class*="ui-state"]').each(function(){let date=m(this.parentNode.className,format);let rate="";if((undefined!==date)&&j(date,dates)&&(""!==(rate=h(ac(date,dates))))&&(0===M(this.parentNode).find(".rate").length)){let rateElement=document.createElement("span");rateElement.className="rate";rateElement.appendChild(document.createTextNode(rate));this.parentNode.appendChild(rateElement)}})}M(af).find(".ui-datepicker-calendar td[title]").contextmenu(function(ag){ag.preventDefault();try{alert(this.getAttribute("title").replace(/\.\s?/gi,".\n"))}catch(ah){console.log(ah)}})}function a(af){window.setTimeout(function(ag){aa(ag)},250,af)}function Q(af){let classes=[];let messages=[];let state=o(this);let format=x("dateFormat",this);let dates=k(this);let theDateString=ab(af,format);let theDateKey=ab(af,l);classes.push("date-key-"+theDateKey);let beforeMinDate=(af<P(x("firstDate",this),format));if(beforeMinDate){classes.push("before-min-date")}let afterMaxDate=(af>P(x("lastDate",this),format));if(afterMaxDate){classes.push("after-max-date")}let hasData=j(theDateString,dates);classes.push(hasData?"has-data":"no-data");let dateData=ac(theDateString,dates);let rate=h(dateData);let hasRate=(""!==rate);if(!beforeMinDate&&!afterMaxDate){classes.push(hasRate?"has-rate":"no-rate")}let arrivalAvailable=(R(dateData)&&!(beforeMinDate||afterMaxDate));classes.push(arrivalAvailable?"arrival-available":"arrival-unavailable");let yesterdayData=ac(ab(G(af,-1),format),dates);let departureAvailable=(R(yesterdayData)&&!(beforeMinDate||afterMaxDate));classes.push(departureAvailable?"departure-available":"departure-unavailable");let arrivalAllowed=n(dateData);classes.push(arrivalAllowed?"arrival-allowed":"arrival-prohibited");let departureAllowed=u(dateData);classes.push(departureAllowed?"departure-allowed":"departure-prohibited");if(!beforeMinDate&&!afterMaxDate){if(hasRate){messages.push(availabilityCalendar.messages.rate.replace("{rate}",rate))}messages.push(availabilityCalendar.messages.minimumStay.replace("{minimumStay}",y(theDateString,this)));messages.push(arrivalAvailable?availabilityCalendar.messages.available:availabilityCalendar.messages.unavailable);messages.push(arrivalAllowed?availabilityCalendar.messages.arrivalsAllowed:availabilityCalendar.messages.arrivalsNotAllowed);messages.push(departureAllowed?availabilityCalendar.messages.departuresAllowed:availabilityCalendar.messages.departuresNotAllowed)}let canArrive=(arrivalAvailable&&arrivalAllowed);let canDepart=(departureAvailable&&departureAllowed);let conflictMessage=false;let selectedArrivalDateString=B("selected-arrival",this);let selectedArrivalDate=P(selectedArrivalDateString,format);let selectedArrival=((null!==selectedArrivalDate)&&V(af,selectedArrivalDate));if(selectedArrival){classes.push("selected-arrival");messages.push(availabilityCalendar.messages.selectedArrival);if(!canArrive||beforeMinDate||afterMaxDate){classes.push("arrival-conflict");conflictMessage=true}}let selectedDepartureDateString=B("selected-departure",this);let selectedDepartureDate=P(selectedDepartureDateString,format);let selectedDeparture=((null!==selectedDepartureDate)&&V(af,selectedDepartureDate));if(selectedDeparture){classes.push("selected-departure");messages.push(availabilityCalendar.messages.selectedDeparture);if(!canDepart||beforeMinDate||afterMaxDate){classes.push("departure-conflict");conflictMessage=true}}if((null!==selectedArrivalDate)&&(null!==selectedDepartureDate)&&((selectedArrivalDate<af)&&(af<selectedDepartureDate))){classes.push("selected-stay");messages.push(availabilityCalendar.messages.selectedStay);if((!arrivalAvailable&&!departureAvailable)||beforeMinDate||afterMaxDate){classes.push("stay-conflict");conflictMessage=true}else{if(!arrivalAvailable){classes.push("arrival-conflict");conflictMessage=true}else{if(!departureAvailable){classes.push("departure-conflict");conflictMessage=true}}}}if(true===conflictMessage){messages.push(availabilityCalendar.messages.selectedDatesConflict)}let minDepartureDateString=B("first-departure",this);let minStayMessage=false;if((w===state)&&(""!==minDepartureDateString)){if((""!==selectedArrivalDateString)&&(theDateString===selectedArrivalDateString)){classes.push("minimum-stay-requirement");minStayMessage=true}else{if((""!==selectedArrivalDateString)&&(H(selectedArrivalDateString,theDateString,format))&&(H(theDateString,minDepartureDateString,format))){classes.push("minimum-stay-requirement selected-stay");minStayMessage=true}else{if(theDateString===minDepartureDateString){classes.push("minimum-stay-requirement selected-departure");messages.push(availabilityCalendar.messages.firstAvailableDeparture)}}}if(true===minStayMessage){messages.push(availabilityCalendar.messages.minimumStayPeriod)}}let selectable=false;if(F===state){selectable=canArrive}else{selectable=(canDepart&&E(theDateString,B("first-departure",this),B("last-departure",this),format))}return[selectable,classes.join(" "),messages.join(" ")]}function p(ag,af,ah){let state=o(ah);if(F===state){let messages=[];let mustDepartOnDateString=O(ag,ah);let minimumStayUntilDateString=t(ag,ah);let firstAllowedDepartureDateString=T(minimumStayUntilDateString,ah);if(H(mustDepartOnDateString,firstAllowedDepartureDateString,af.settings.dateFormat)){messages.push(availabilityCalendar.messages.arrivalImpossible);messages.push(availabilityCalendar.messages.selectAnotherDate);alert(messages.join("\n"));a(ah);return}g("",w,ah,af.settings.dateFormat,af.settings.altFormat);K("first-departure",firstAllowedDepartureDateString,ah);K("last-departure",mustDepartOnDateString,ah)}else{if(w===state){Z("first-departure",ah);Z("last-departure",ah)}}g(ag,state,ah,af.settings.dateFormat,af.settings.altFormat);c(ah)}function S(af){return Math.floor(af.offsetWidth/295)}function v(af,ag){f(ag);U(ag,F);let arrivalInput=d(F,ag);let defaultDate=((null===arrivalInput)||(""===arrivalInput.value))?null:arrivalInput.value;let calendarParameters=r(ag);let parameters={beforeShowDay:Q,altFormat:calendarParameters.dateFormatDisplay,dateFormat:calendarParameters.dateFormat,firstDay:calendarParameters.weekStart,defaultDate:defaultDate,gotoCurrent:true,maxDate:calendarParameters.lastDate,minDate:calendarParameters.firstDate,showOtherMonths:false,numberOfMonths:S(ag),onChangeMonthYear:function(){a(this)},onSelect:function(){a(this)}};let calendarType=A(ag);switch(calendarType){case D:M(ag).datepicker(parameters);break;case Y:default:parameters.onSelect=function(ai,ah){p(ai,ah,this)};M(ag).datepicker(parameters);break}a(ag)}M(".availability-calendar").each(v)});